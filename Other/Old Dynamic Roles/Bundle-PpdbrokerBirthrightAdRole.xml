<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Bundle PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<Bundle displayName="PPDBroker Birthright AD Role" name="PPDBroker Birthright AD Role" type="dynamic">
    <Attributes>
        <Map>
            <entry key="acceleratorPackEnabled"/>
            <entry key="accountSelectorRules"> 
	          <value>
	              <AccountSelectorRules>
	                  <ApplicationAccountSelectorRules>
	                    <ApplicationAccountSelectorRule>
	                        <ApplicationRef>
	                            <Reference class="sailpoint.object.Application" name="Active Directory"/>
	                        </ApplicationRef>
	                        <RuleRef>
	                            <Reference class="sailpoint.object.Rule" name="Clorox Primary AD Account Selector Rule"/>
	                        </RuleRef>
	                    </ApplicationAccountSelectorRule>
	                  </ApplicationAccountSelectorRules>
	              </AccountSelectorRules>
	          </value>
	        </entry>
            <entry key="additionalRoleBusApprovalRule"/>
            <entry key="additionalRoleBusApprovers"/>
            <entry key="allowDuplicateAccounts" value="false"/>
            <entry key="allowMultipleAssignments" value="false"/>
            <entry key="apaccountType"/>
            <entry key="appName"/>
            <entry key="formappName"/>
            <entry key="isBirthright" value="true"/>
            <entry key="mergeTemplates" value="false"/>
            <entry key="roleBusApprovalRule"/>
            <entry key="roleBusApprovers"/>
            <entry key="rolePrivileged"/>
            <entry key="sysDescriptions">
                <value>
                    <Map>
                        <entry key="en_US"/>
                    </Map>
                </value>
            </entry>
        </Map>
    </Attributes>
    <Inheritance>
        <Reference class="sailpoint.object.Bundle" name="Clorox BaselineBirthright AD Roles"/>
    </Inheritance>
    <Owner>
        <Reference class="sailpoint.object.Identity" name="spadmin"/>
    </Owner>
    <Selector>
        <IdentitySelector>
            <RuleRef>
                <Reference class="sailpoint.object.Rule" name="Clorox AD Birthright PPDBroker Assignment Rule"/>
            </RuleRef>
        </IdentitySelector>
    </Selector>
    <Profiles>
        <Profile>
            <ApplicationRef>
                <Reference class="sailpoint.object.Application" name="Active Directory"/>
            </ApplicationRef>
            <Constraints>
                <Filter operation="CONTAINS_ALL" property="memberOf">
                    <Value>
                        <List>
                            <String>CN=PPDBrokers%%ENVIRONMENT_TAG%%,%%AD_GROUP_PPDBROKERS_OU%%</String>
                            <String>CN=DOMAIN USERS%%ENVIRONMENT_TAG%%,%%AD_GROUP_DOMAIN_USERS_EXT_OU%%</String>
                        </List>
                    </Value>
                </Filter>
            </Constraints>
        </Profile>
    </Profiles>
</Bundle>
